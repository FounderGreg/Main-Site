<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- GHOST MODE: Prevents search engines from indexing the tool -->
    <meta name="robots" content="noindex, nofollow">
    
    <title>ProspAIrity Diagnostic | SD 2026</title>
    
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Montserrat', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #0C3D52 0%, #073042 100%); }
        .btn-shadow { box-shadow: 0 4px 14px 0 rgba(255, 154, 85, 0.3); }
        .animate-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Custom scrollbar for results */
        .results-scroll::-webkit-scrollbar { width: 4px; }
        .results-scroll::-webkit-scrollbar-track { background: #f1f1f1; }
        .results-scroll::-webkit-scrollbar-thumb { background: #FF9A55; border-radius: 10px; }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- This hidden form is for Netlify's build-time bot to detect the form fields -->
    <form name="diagnostic-lead" data-netlify="true" hidden>
        <input type="text" name="userName" />
        <input type="text" name="companyName" />
        <input type="email" name="userEmail" />
        <input type="tel" name="userPhone" />
        <input type="text" name="industry" />
        <input type="text" name="employees" />
        <textarea name="strategic_profile"></textarea>
    </form>

    <script type="text/babel">
        const { useState } = React;

        const App = () => {
            const [step, setStep] = useState(0);
            const [isSubmitting, setIsSubmitting] = useState(false);
            const [isSubmitted, setIsSubmitted] = useState(false);
            const [formData, setFormData] = useState({
                industry: '', 
                employees: '', 
                exports: false, 
                investingInTech: false, 
                trainingNeeded: false,
                userName: '',
                companyName: '',
                userEmail: '',
                userPhone: ''
            });

            const industries = [
                { id: 'manufacturing', label: 'Manufacturing / R&D', icon: 'âš™ï¸' },
                { id: 'professional', label: 'Professional / Tech', icon: 'ðŸ’¼' },
                { id: 'medical', label: 'Medical / Wellness', icon: 'ðŸ¥' },
                { id: 'hospitality', label: 'Hospitality / Food', icon: 'ðŸ´' },
                { id: 'retail', label: 'Retail / Product', icon: 'ðŸ›ï¸' },
                { id: 'other', label: 'Other Service', icon: 'âœ¨' }
            ];

            const encode = (data) => {
                return Object.keys(data)
                    .map(key => encodeURIComponent(key) + "=" + encodeURIComponent(data[key]))
                    .join("&");
            };

            const calculateEligibility = () => {
                const results = [];
                const empCount = parseInt(formData.employees) || 0;
                const isBaseSector = formData.industry === 'manufacturing' || formData.industry === 'professional' || formData.exports;
                
                if (empCount <= 24 && isBaseSector) {
                    results.push({ 
                        name: "SD Business Incentive (BIP)", 
                        value: "Up to $100,000", 
                        conf: "High", 
                        desc: "Matches 'Base Sector' profile. We frame your overhaul as 'Innovation Economy' training to satisfy Tier 2-4 requirements." 
                    });
                }

                if (formData.trainingNeeded) {
                    results.push({ 
                        name: "ETP Training Grants", 
                        value: empCount >= 10 ? "$25,000 - $50,000+" : "$15,000 - $25,000", 
                        conf: "High", 
                        desc: "Recover consulting fees via state-subsidized employee upskilling on AI/Automation logic." 
                    });
                }

                if (formData.industry === 'manufacturing' || formData.investingInTech) {
                    results.push({ 
                        name: "CA Sales Tax Exemption", 
                        value: "~4.12% Savings", 
                        conf: "High", 
                        desc: "Reduces cost of R&D hardware and automation-ready software infrastructure." 
                    });
                }
                return results;
            };

            const handleSubmit = (e) => {
                e.preventDefault();
                setIsSubmitting(true);

                const profileSummary = [
                    formData.exports ? "Exports services" : "",
                    formData.investingInTech ? "Tech investor" : "",
                    formData.trainingNeeded ? "Training required" : ""
                ].filter(Boolean).join(", ");

                fetch("/", {
                    method: "POST",
                    headers: { "Content-Type": "application/x-www-form-urlencoded" },
                    body: encode({ 
                        "form-name": "diagnostic-lead", 
                        ...formData,
                        strategic_profile: profileSummary
                    })
                })
                .then(() => {
                    setIsSubmitted(true);
                    setIsSubmitting(false);
                })
                .catch(error => {
                    console.error("Submission Error:", error);
                    setIsSubmitting(false);
                });
            };

            const results = calculateEligibility();

            return (
                <div className="min-h-screen gradient-bg flex items-center justify-center p-4">
                    <div className="max-w-md w-full bg-white rounded-[2.5rem] shadow-2xl overflow-hidden border border-white/10">
                        {/* Header */}
                        <div className="bg-[#073042] p-6 text-center border-b-4 border-[#FF9A55]">
                            <h1 className="text-white text-xl font-bold uppercase tracking-tighter italic">Prosp<span className="text-[#FF9A55]">AI</span>rity <span className="font-light">Diagnostic</span></h1>
                            <p className="text-blue-200 text-[9px] uppercase tracking-widest mt-1">San Diego 2026 Subsidy Analysis</p>
                        </div>

                        <div className="p-8">
                            {/* Step 0: Welcome */}
                            {step === 0 && (
                                <div className="text-center space-y-6 animate-in">
                                    <div className="text-5xl mb-2">ðŸ“ˆ</div>
                                    <h2 className="text-2xl font-bold text-slate-800 tracking-tight leading-tight">Recruit Your Capital</h2>
                                    <p className="text-slate-600 text-sm leading-relaxed font-medium">Identify regional subsidies to offset your 2026 operational transformation and protect your margins.</p>
                                    <button onClick={() => setStep(1)} className="w-full bg-[#0C3D52] text-white py-4 rounded-2xl font-bold hover:bg-[#073042] transition-all btn-shadow active:scale-95">Start Assessment</button>
                                </div>
                            )}

                            {/* Step 1: Industry */}
                            {step === 1 && (
                                <div className="space-y-4 animate-in">
                                    <h2 className="font-bold text-slate-800 mb-2 uppercase text-xs tracking-widest">1. Select Sector:</h2>
                                    <div className="grid grid-cols-2 gap-3">
                                        {industries.map(i => (
                                            <button key={i.id} onClick={() => { setFormData({...formData, industry: i.id}); setStep(2); }} className="p-4 border-2 border-slate-50 rounded-2xl hover:border-[#FF9A55] hover:bg-orange-50 text-left text-sm font-semibold transition-all group">
                                                <span className="block text-2xl mb-1">{i.icon}</span>
                                                <span className="text-slate-600 group-hover:text-[#0C3D52]">{i.label}</span>
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            )}

                            {/* Step 2: Scale */}
                            {step === 2 && (
                                <div className="space-y-4 animate-in">
                                    <h2 className="font-bold text-slate-800 mb-2 uppercase text-xs tracking-widest">2. Team Scale:</h2>
                                    {['1-10', '11-24', '25-100', '100+'].map(r => (
                                        <button key={r} onClick={() => { setFormData({...formData, employees: r.split('-')[0]}); setStep(3); }} className="w-full p-5 border-2 border-slate-50 rounded-2xl text-left font-bold hover:border-[#FF9A55] transition-all flex justify-between items-center group">
                                            <span className="text-slate-700">{r} Employees</span>
                                            <span className="text-slate-300 group-hover:text-[#FF9A55] transition-transform group-hover:translate-x-1">â†’</span>
                                        </button>
                                    ))}
                                </div>
                            )}

                            {/* Step 3: Profile */}
                            {step === 3 && (
                                <div className="space-y-4 animate-in">
                                    <h2 className="font-bold text-slate-800 uppercase text-xs tracking-widest">3. Strategic Profile:</h2>
                                    <label className="flex items-center p-4 border-2 border-slate-50 rounded-2xl cursor-pointer hover:bg-slate-50 transition-colors">
                                        <input type="checkbox" onChange={e => setFormData({...formData, exports: e.target.checked})} className="w-5 h-5 rounded border-slate-300 text-[#FF9A55] focus:ring-[#FF9A55] mr-4"/> 
                                        <span className="text-xs font-semibold text-slate-700 leading-tight">We sell products/services outside San Diego County.</span>
                                    </label>
                                    <label className="flex items-center p-4 border-2 border-slate-50 rounded-2xl cursor-pointer hover:bg-slate-50 transition-colors">
                                        <input type="checkbox" onChange={e => setFormData({...formData, investingInTech: e.target.checked})} className="w-5 h-5 rounded border-slate-300 text-[#FF9A55] focus:ring-[#FF9A55] mr-4"/> 
                                        <span className="text-xs font-semibold text-slate-700 leading-tight">Planning significant tech infrastructure upgrades in 2026.</span>
                                    </label>
                                    <label className="flex items-center p-4 border-2 border-slate-50 rounded-2xl cursor-pointer hover:bg-slate-50 transition-colors">
                                        <input type="checkbox" onChange={e => setFormData({...formData, trainingNeeded: e.target.checked})} className="w-5 h-5 rounded border-slate-300 text-[#FF9A55] focus:ring-[#FF9A55] mr-4"/> 
                                        <span className="text-xs font-semibold text-slate-700 leading-tight">Team requires upskilling for new automated logic systems.</span>
                                    </label>
                                    <button onClick={() => setStep(4)} className="w-full bg-[#0C3D52] text-white py-5 rounded-2xl font-bold mt-4 btn-shadow active:scale-95 transition-transform uppercase tracking-widest text-xs">Analyze Capital Options</button>
                                </div>
                            )}

                            {/* Step 4: Final Results & Lead Form */}
                            {step === 4 && (
                                <div className="space-y-4 animate-in">
                                    <h2 className="font-bold text-slate-800 text-lg border-b pb-1 uppercase tracking-tight">Incentive Targets:</h2>
                                    <div className="space-y-3 max-h-[220px] overflow-y-auto pr-2 results-scroll">
                                        {results.length > 0 ? results.map((r, idx) => (
                                            <div key={idx} className="p-4 bg-slate-50 border-l-4 border-[#FF9A55] rounded-r-2xl relative shadow-sm">
                                                <span className="absolute top-2 right-2 text-[7px] px-2 py-0.5 rounded font-black uppercase bg-green-500 text-white">
                                                    {r.conf} Prob.
                                                </span>
                                                <h4 className="font-bold text-[#0C3D52] text-[10px] mb-1">{r.name}</h4>
                                                <div className="text-2xl font-black text-slate-900 leading-none mb-1">{r.value}</div>
                                                <p className="text-[9px] text-slate-500 leading-tight italic font-medium">{r.desc}</p>
                                            </div>
                                        )) : <p className="text-xs text-slate-500 italic text-center py-4">Standard track confirmed.</p>}
                                    </div>
                                    
                                    {!isSubmitted ? (
                                        <form onSubmit={handleSubmit} className="mt-6 space-y-3 p-6 bg-[#073042] rounded-[2rem] shadow-xl">
                                            <h3 className="text-[#FF9A55] text-[11px] font-black uppercase tracking-widest text-center mb-2">Unlock Roadmap</h3>
                                            <input 
                                                required 
                                                name="userName"
                                                placeholder="Full Name" 
                                                className="w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white text-xs placeholder:text-white/40 outline-none focus:border-[#FF9A55] transition-colors"
                                                onChange={(e) => setFormData({...formData, userName: e.target.value})}
                                            />
                                            <input 
                                                required 
                                                name="companyName"
                                                placeholder="Company Name" 
                                                className="w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white text-xs placeholder:text-white/40 outline-none focus:border-[#FF9A55] transition-colors"
                                                onChange={(e) => setFormData({...formData, companyName: e.target.value})}
                                            />
                                            <div className="flex gap-2">
                                                <input 
                                                    required 
                                                    name="userEmail"
                                                    type="email" 
                                                    placeholder="Work Email" 
                                                    className="w-1/2 bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white text-xs placeholder:text-white/40 outline-none focus:border-[#FF9A55] transition-colors"
                                                    onChange={(e) => setFormData({...formData, userEmail: e.target.value})}
                                                />
                                                <input 
                                                    required 
                                                    name="userPhone"
                                                    type="tel" 
                                                    placeholder="Phone" 
                                                    className="w-1/2 bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white text-xs placeholder:text-white/40 outline-none focus:border-[#FF9A55] transition-colors"
                                                    onChange={(e) => setFormData({...formData, userPhone: e.target.value})}
                                                />
                                            </div>
                                            <button 
                                                disabled={isSubmitting}
                                                className="w-full bg-[#FF9A55] text-[#073042] py-4 rounded-xl font-black text-xs uppercase tracking-widest shadow-lg hover:brightness-110 active:scale-95 transition-all mt-2"
                                            >
                                                {isSubmitting ? "Processing..." : "Secure My Strategy"}
                                            </button>
                                        </form>
                                    ) : (
                                        <div className="mt-6 p-8 bg-green-50 rounded-[2rem] border-2 border-green-100 text-center animate-in zoom-in-95">
                                            <div className="w-12 h-12 bg-green-500 rounded-full flex items-center justify-center mx-auto text-white shadow-lg mb-4">âœ“</div>
                                            <h3 className="font-bold text-green-900 mb-1">Lead Confirmed</h3>
                                            <p className="text-[10px] text-green-800 font-semibold leading-relaxed">Greg Klisser will contact you within 24 hours to review your incentives roadmap.</p>
                                            <button onClick={() => setStep(0)} className="text-[9px] font-black text-green-600 uppercase tracking-widest mt-6 hover:text-green-700 underline">New Assessment</button>
                                        </div>
                                    )}
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>